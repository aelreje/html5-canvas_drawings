<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8 Graphical Arts - 2x4 Grid</title>
    <style>
        body, html { 
            height: 100%; 
            margin: 0; 
            font-family: 'Inter', sans-serif; 
            background-color: #f0f2f5; 
        }
        
        body { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 200px);
            grid-template-rows: repeat(2, 200px);
            gap: 10px;
            padding: 10px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .grid-cell {
            width: 200px; 
            height: 200px;
            background-color: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-sizing: border-box;
            display: block;
        }
    </style>

    <!-- Initialize AdobeAn Namespace -->
    <script>
        var AdobeAn = {};
    </script>

    <!-- Load CreateJS -->
    <script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>

    <!-- Load Asset Scripts -->
    <script src="assets/fire-glyph_final-symbols.js"></script>
    <script src="assets/water_final-symbols.js"></script>
    <script src="assets/grass_final-symbols.js"></script>
    <script src="assets/ice-glyph_final-symbols.js"></script>
    <script src="assets/light-glyph_final-symbols.js"></script>
    <script src="assets/lightning_final-symbols.js"></script>
    <script src="assets/plant-glyph_final-symbols.js"></script>
    <script src="assets/fire_final-symbols.js"></script> 
</head>
<body>

    <div class="grid-container">
        <!-- Row 1 -->
        <canvas id="canvas1" class="grid-cell" width="200" height="200"></canvas>
        <canvas id="canvas2" class="grid-cell" width="200" height="200"></canvas>
        <canvas id="canvas3" class="grid-cell" width="200" height="200"></canvas>
        <canvas id="canvas4" class="grid-cell" width="200" height="200"></canvas>

        <!-- Row 2 -->
        <canvas id="canvas5" class="grid-cell" width="200" height="200"></canvas>
        <canvas id="canvas6" class="grid-cell" width="200" height="200"></canvas>
        <canvas id="canvas7" class="grid-cell" width="200" height="200"></canvas>
        <canvas id="canvas8" class="grid-cell" width="200" height="200"></canvas>
    </div>

    <script>
        // Map Canvas IDs to the Unique IDs in the requested order
        const compositions = [
            // Row 1
            { canvasId: 'canvas1', compId: 'FIRE_FINAL' },      
            { canvasId: 'canvas2', compId: 'WATER_GLYPH' },    
            { canvasId: 'canvas3', compId: 'GRASS_GLYPH' },    
            { canvasId: 'canvas4', compId: 'LIGHTNING_GLYPH' },       
            
            // Row 2
            { canvasId: 'canvas5', compId: 'FIRE_GLYPH' },     
            { canvasId: 'canvas6', compId: 'ICE_GLYPH'}, 
            { canvasId: 'canvas7', compId: 'PLANT_GLYPH' },     
            { canvasId: 'canvas8', compId: 'LIGHT_GLYPH' }       
        ];

        function loadComposition(config) {
            var comp = AdobeAn.getComposition(config.compId);
            
            if (!comp) {
                console.error("Composition not found:", config.compId);
                return;
            }

            var lib = comp.getLibrary();
            var loader = new createjs.LoadQueue(false);
            
            loader.addEventListener("fileload", function(evt){
                var images = comp.getImages();
                if (evt && (evt.item.type == "image")) { images[evt.item.id] = evt.result; }
            });

            loader.addEventListener("complete", function(evt){
                var ss = comp.getSpriteSheet();
                var queue = evt.target;
                var ssMetadata = lib.ssMetadata;
                for(var i=0; i<ssMetadata.length; i++) {
                    ss[ssMetadata[i].name] = new createjs.SpriteSheet( {
                        "images": [queue.getResult(ssMetadata[i].name)], 
                        "frames": ssMetadata[i].frames
                    } );
                }

                var canvas = document.getElementById(config.canvasId);
                var exportRoot = new lib.finalsymbols(); 
                var stage = new createjs.Stage(canvas);
                
                // Scale 300x300 assets to 200x200 canvas
                exportRoot.scaleX = exportRoot.scaleY = 200 / 300;
                
                stage.addChild(exportRoot);
                createjs.Ticker.framerate = lib.properties.fps;
                createjs.Ticker.addEventListener("tick", stage);
            });

            loader.loadManifest(lib.properties.manifest);
        }

        window.onload = function() {
            compositions.forEach(config => loadComposition(config));
        };
    </script>

</body>
</html>